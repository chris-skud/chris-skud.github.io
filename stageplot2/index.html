<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Stageplot</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="apple-touch-icon" href="icon.png">
  <link rel="stylesheet" href="main.css">
  <script src="https://unpkg.com/konva@9.0.2/konva.min.js"></script>
</head>
<body>
    <header>
        <div class="logo"><img src="stageplot_logo.png" width="50" height="50">&nbsp;<div>Stageplot.band</div></div>
        <div class="share header-content">about&nbsp;<a href="#">share</a></div>
    </header>
    <div id="main">
        <div id="details">
            <span><label for="name">Band </label><input id="name" type="text"></span>
            <span class="details"><label class="details" for="venue">Venue </label><input id="venue" type="text"></span>
            <span class="details"></span><label class="details" for="date">Date </label><input id="date" name="date" type="text"></span>
        </div>
        <h2>Stage</h2>
        <div id="stage-container">
            <canvas id="c" width="800" height="600" style="border:1px solid #ccc"></canvas>
        </div>
        <div id="palette"></div>
        <h2>Input List</h2>
        <div id="inputs">
            <table class="input_list">
                <tbody id="inputs_tbody">
                <tr>
                    <td class="number">1</td>
                    <td class="inputTd" tabindex="10"><input type="text" name="input1" id="input1"></td>
                    <td class="even number">9</td>
                    <td class="even"><input type="text" id="input9"></td>
                    <td class="number">17</td>
                    <td><input type="text" id="input17"></td>
                    <td class="even number">25</td>
                    <td class="even"><input type="text" id="input25"></td>
                </tr>
                <tr>
                    <td class="number">2</td>
                    <td><input type="text" id="input2" tabindex="11"></td>
                    <td class="even number">10</td>
                    <td class="even"><input type="text" id="input10"></td>
                    <td class="number">18</td>
                    <td><input type="text" id="input18"></td>
                    <td class="even number">26</td>
                    <td class="even"><input type="text" id="input26"></td>
                </tr>
                <tr>
                    <td class="number">3</td>
                    <td><input type="text" id="input3" tabindex="12"></td>
                    <td class="even number">11</td>
                    <td class="even"><input type="text" id="input11"></td>
                    <td class="number">19</td>
                    <td><input type="text" id="input19"></td>
                    <td class="even number">27</td>
                    <td class="even"><input type="text" id="input27"></td>
                </tr>
                <tr>
                    <td class="number">4</td>
                    <td><input type="text" id="input4" tabindex="13"></td>
                    <td class="even number">12</td>
                    <td class="even"><input type="text" id="input12"></td>
                    <td class="number">20</td>
                    <td><input type="text" id="input20"></td>
                    <td class="even number">28</td>
                    <td class="even"><input type="text" id="input28"></td>
                </tr>
                <tr>
                    <td class="number">5</td>
                    <td><input type="text" id="input5" tabindex="14"></td>
                    <td class="even number">13</td>
                    <td class="even"><input type="text" id="input13"></td>
                    <td class="number">21</td>
                    <td><input type="text" id="input21"></td>
                    <td class="even number">29</td>
                    <td class="even"><input type="text" id="input29"></td>
                </tr>
                <tr>
                    <td class="number">6</td>
                    <td><input type="text" id="input6" tabindex="15"></td>
                    <td class="even number">14</td>
                    <td class="even"><input type="text" id="input14"></td>
                    <td class="number">22</td>
                    <td><input type="text" id="input22"></td>
                    <td class="even number">30</td>
                    <td class="even"><input type="text" id="input30"></td>
                </tr>
                <tr>
                    <td class="number">7</td>
                    <td><input type="text" id="input7" tabindex="16"></td>
                    <td class="even number">15</td>
                    <td class="even"><input type="text" id="input15"></td>
                    <td class="number">23</td>
                    <td><input type="text" id="input23"></td>
                    <td class="even number">31</td>
                    <td class="even"><input type="text" id="input31"></td>
                </tr>
                <tr>
                    <td class="number">8</td>
                    <td><input type="text" id="input8" tabindex="17"></td>
                    <td class="even number">16</td>
                    <td class="even"><input type="text" id="input16"></td>
                    <td class="number">24</td>
                    <td><input type="text" id="input24"></td>
                    <td class="even number">32</td>
                    <td class="even"><input type="text" id="input32"></td>
                </tr>

            </tbody></table>
        
        </div>
        <h2>Notes</h2>
        <div id="notes">
            <textarea id="notes" name="notes" oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'></textarea>
        </div>
    </form>
    </div>
    <script type="module" src="scripts/main.js"></script>
    <script src="scripts/fabric.js"></script>
    <script>
        const renderCanvas = () => {
            var canvas = this.__canvas = new fabric.Canvas('c');
                // create a rect object
            var deleteIcon = "data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E";

            var img = document.createElement('img');
            img.src = deleteIcon;

            fabric.Object.prototype.transparentCorners = false;
            fabric.Object.prototype.cornerColor = 'blue';
            fabric.Object.prototype.cornerStyle = 'circle';

            function Add() {
                var rect = new fabric.Rect({
                left: 100,
                top: 50,
                fill: 'yellow',
                width: 200,
                height: 100,
                objectCaching: false,
                stroke: 'lightgreen',
                strokeWidth: 4,
                });

                canvas.add(rect);
                canvas.setActiveObject(rect);
            }

            fabric.Object.prototype.controls.deleteControl = new fabric.Control({
                x: 0.5,
                y: -0.5,
                offsetY: 16,
                cursorStyle: 'pointer',
                mouseUpHandler: deleteObject,
                render: renderIcon,
                cornerSize: 24
            });

            Add();

            function deleteObject(eventData, transform) {
                    var target = transform.target;
                    var canvas = target.canvas;
                        canvas.remove(target);
                    canvas.requestRenderAll();
                }

            function renderIcon(ctx, left, top, styleOverride, fabricObject) {
                var size = this.cornerSize;
                ctx.save();
                ctx.translate(left, top);
                ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle));
                ctx.drawImage(img, -size/2, -size/2, size, size);
                ctx.restore();
            }
        }
        window.addEventListener('load', renderCanvas)
    </script>
</body>
</html>